<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libtime: libtime.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>libtime.c File Reference</h1>Implementation of libtime. <a href="#_details">More...</a>
<p>
<code>#include &lt;sys/time.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &quot;<a class="el" href="libtime_8h.html">libtime.h</a>&quot;</code><br>
<code>#include &quot;codec.h&quot;</code><br>
<code>#include &lt;dbus/dbus.h&gt;</code><br>
<code>#include &quot;clock_dbus.h&quot;</code><br>
<code>#include &lt;pthread.h&gt;</code><br>
<code>#include &lt;semaphore.h&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static DBusMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#b81ed163321fdcee7ef4bce55ba77144">client_new_req</a> (const char *method, int dbus_type,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static DBusMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#fafdf90dca5416e4d5c9e9e55815f981">client_get_rsp</a> (DBusMessage *msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#d188120cf031aaced12da8bf171d7228">client_set_time</a> (time_t tck)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#cad4c08145a3ef4ae95ff6a3ab2aa243">client_activate_net_time</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#6d1151c93963f3149e2e1fe5e7320d8a">client_get_time_format</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#45ffc03567ce820a1b6015379f221200">client_get_default_tz</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#819134794b9e8b14cb3cd4ea80a74be5">client_set_time_format</a> (const char *fmt)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#e0ed5ecf1f28d07c0ec3082c63099dcf">client_get_tz</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#245d10a3a1e64283f5cfab1cfb7d6539">client_set_tz</a> (const char *tz)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#6ecec89362102fa29cc42d3e74851123">client_get_net_time</a> (time_t *t, char *s, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#ea1ac8b45ccb6dec2205588b9af2f764">client_get_autosync</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#32c0fe95e7d5748ac5c19ec82c10d14d">client_set_autosync</a> (int enable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#870d4b19ed5833cbeba4f9927df059c8">client_is_operator_time_accessible</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#98f6dc99442e15f6e16530adab8765e3">get_synced</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#a30f448499c0b07fc38c5b8d01b26c3a">libtime_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#9e5793082e85cf72400b52348241f288">libtime_fini</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#f8db26585c7e7e57b5bca1b950e7dba8">time_get_synced</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#0e44b0cb73ba32422c5586895b27edec">time_get_time</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#fdd711a8ac871a54f2c5d5867137df57">time_set_time</a> (time_t tick)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#89e293d7c574eb70e0e2b62844e91717">time_activate_net_time</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#3f552afdecca5ec71d570823e52c1d54">time_get_timezone</a> (char *buf, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#bdc11987fc52c5d0359067026f4cedc8">time_get_tzname</a> (char *buf, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#3b7ac22690790e84f32a0a3884e040e4">time_set_timezone</a> (const char *tz)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#dac10e54acc2ba4cb07588c84a1811a4">time_get_utc</a> (struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#6978c98b45a7ba38918321bcf10cd302">time_get_utc_ex</a> (time_t tick, struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#8f322ea4f1b395ce789bde87a1f82c16">time_get_local</a> (struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#0d8c8e5c5b07f8f86af2d532b63a99de">time_get_local_ex</a> (time_t tick, struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#09d62e58f222e51a867314408b10d7ec">time_get_remote</a> (time_t tick, const char *tz, struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#2c8d47b189bd59774826a2e90d428c31">time_get_time_format</a> (char *buf, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#b65f35e1dbbd0627393d8915dfb6c49b">time_get_default_timezone</a> (char *buf, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#45229beef1f2d819fb5858dc762c8e5a">time_set_time_format</a> (const char *fmt)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#3f8f2ba67056f927ea03bf806292fa71">time_format_time</a> (const struct tm *tm, const char *fmt, char *s, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#c8c409cf5c596a5f237e5b8d4985341c">time_get_utc_offset</a> (const char *tz)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#f5a65d5aab89e93aedd04dad66d6f27f">time_get_dst_usage</a> (time_t tick, const char *tz)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#a8f2dd9ba3f044b2111b040aa47ba048">time_diff</a> (time_t t1, time_t t2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#d9bb6969fcd9a4fb5a30d06a68f57006">time_mktime</a> (struct tm *tm, const char *tz)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#16d2037dfad8313c6dc221a9623fbd57">time_get_net_time</a> (time_t *tick, char *s, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#e6c61efaeef52f459a95521749154550">time_is_net_time_changed</a> (time_t *tick, char *s, size_t max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#4a68c690a500ce33c05a2751eb9cc0c5">time_set_autosync</a> (int enable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#39687b49dcb5972d44a8e11ca471b9c2">time_get_autosync</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#cf051c3a6b5a415aef3cee667a4ae018">time_is_operator_time_accessible</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libtime_8c.html#1651654092cddd772df20121398de3b8">time_get_time_diff</a> (time_t tick, const char *tz1, const char *tz2)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the implementation of libtime (see <a class="el" href="libtime_8h.html" title="Interface to time functionality (libtime and clockd).">libtime.h</a>) <br>
 Include also file &lt;time.h&gt; <br>
<p>
Copyright (C) 2008 Nokia. All rights reserved.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Simo Piiroinen &lt;<a href="mailto:simo.piiroinen@nokia.com">simo.piiroinen@nokia.com</a>&gt; <p>
Raimo Vuonnala &lt;<a href="mailto:raimo.vuonnala@nokia.com">raimo.vuonnala@nokia.com</a>&gt; </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="b81ed163321fdcee7ef4bce55ba77144"></a><!-- doxytag: member="libtime.c::client_new_req" ref="b81ed163321fdcee7ef4bce55ba77144" args="(const char *method, int dbus_type,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DBusMessage* client_new_req           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dbus_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new DBUs request.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>D-Bus method </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dbus_type</em>&nbsp;</td><td>Vararg list of type/value pairs, last shall be DBUS_TYPE_INVALID</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to created DBus message, NULL if error </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00229">client_activate_net_time()</a>, <a class="el" href="libtime_8c-source.html#l00575">client_get_autosync()</a>, <a class="el" href="libtime_8c-source.html#l00302">client_get_default_tz()</a>, <a class="el" href="libtime_8c-source.html#l00526">client_get_net_time()</a>, <a class="el" href="libtime_8c-source.html#l00268">client_get_time_format()</a>, <a class="el" href="libtime_8c-source.html#l00426">client_get_tz()</a>, <a class="el" href="libtime_8c-source.html#l00655">client_is_operator_time_accessible()</a>, <a class="el" href="libtime_8c-source.html#l00614">client_set_autosync()</a>, <a class="el" href="libtime_8c-source.html#l00185">client_set_time()</a>, <a class="el" href="libtime_8c-source.html#l00384">client_set_time_format()</a>, and <a class="el" href="libtime_8c-source.html#l00476">client_set_tz()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fafdf90dca5416e4d5c9e9e55815f981"></a><!-- doxytag: member="libtime.c::client_get_rsp" ref="fafdf90dca5416e4d5c9e9e55815f981" args="(DBusMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DBusMessage* client_get_rsp           </td>
          <td>(</td>
          <td class="paramtype">DBusMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send method call and wait for response<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>D-Bus message (from client_new_req)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to received DBus response message, NULL if error </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00229">client_activate_net_time()</a>, <a class="el" href="libtime_8c-source.html#l00575">client_get_autosync()</a>, <a class="el" href="libtime_8c-source.html#l00302">client_get_default_tz()</a>, <a class="el" href="libtime_8c-source.html#l00526">client_get_net_time()</a>, <a class="el" href="libtime_8c-source.html#l00268">client_get_time_format()</a>, <a class="el" href="libtime_8c-source.html#l00426">client_get_tz()</a>, <a class="el" href="libtime_8c-source.html#l00655">client_is_operator_time_accessible()</a>, <a class="el" href="libtime_8c-source.html#l00614">client_set_autosync()</a>, <a class="el" href="libtime_8c-source.html#l00185">client_set_time()</a>, <a class="el" href="libtime_8c-source.html#l00384">client_set_time_format()</a>, and <a class="el" href="libtime_8c-source.html#l00476">client_set_tz()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d188120cf031aaced12da8bf171d7228"></a><!-- doxytag: member="libtime.c::client_set_time" ref="d188120cf031aaced12da8bf171d7228" args="(time_t tck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_set_time           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tck</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'set_time' method call over D-Bus<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tck</em>&nbsp;</td><td>Current time (from Epoch)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00829">time_set_time()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cad4c08145a3ef4ae95ff6a3ab2aa243"></a><!-- doxytag: member="libtime.c::client_activate_net_time" ref="cad4c08145a3ef4ae95ff6a3ab2aa243" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_activate_net_time           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'activate_net_time' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00845">time_activate_net_time()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6d1151c93963f3149e2e1fe5e7320d8a"></a><!-- doxytag: member="libtime.c::client_get_time_format" ref="6d1151c93963f3149e2e1fe5e7320d8a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* client_get_time_format           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'get_timefmt' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to locally stored time format, NULL if error </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00693">get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="45ffc03567ce820a1b6015379f221200"></a><!-- doxytag: member="libtime.c::client_get_default_tz" ref="45ffc03567ce820a1b6015379f221200" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* client_get_default_tz           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'get_default_tz' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to locally stored tz, NULL if error </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00693">get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="819134794b9e8b14cb3cd4ea80a74be5"></a><!-- doxytag: member="libtime.c::client_set_time_format" ref="819134794b9e8b14cb3cd4ea80a74be5" args="(const char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_set_time_format           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'set_timefmt' method call over D-Bus<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Time formatter string</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l01153">time_set_time_format()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e0ed5ecf1f28d07c0ec3082c63099dcf"></a><!-- doxytag: member="libtime.c::client_get_tz" ref="e0ed5ecf1f28d07c0ec3082c63099dcf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* client_get_tz           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'get_tz' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to locally stored timezone, NULL if fails. If success, activates the current time zone </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00693">get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="245d10a3a1e64283f5cfab1cfb7d6539"></a><!-- doxytag: member="libtime.c::client_set_tz" ref="245d10a3a1e64283f5cfab1cfb7d6539" args="(const char *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_set_tz           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'set_tz' method call over D-Bus<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Timezone</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails. If success, sets timezone also locally. </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00985">time_set_timezone()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6ecec89362102fa29cc42d3e74851123"></a><!-- doxytag: member="libtime.c::client_get_net_time" ref="6ecec89362102fa29cc42d3e74851123" args="(time_t *t, char *s, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_get_net_time           </td>
          <td>(</td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'net_time_changed' method call over D-Bus<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>Pointer to (tick) to store time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Pointer to buffer to store timezone </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's'</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l01276">time_get_net_time()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ea1ac8b45ccb6dec2205588b9af2f764"></a><!-- doxytag: member="libtime.c::client_get_autosync" ref="ea1ac8b45ccb6dec2205588b9af2f764" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_get_autosync           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'get_autosync' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&gt;0 if autosync is enabled, 0 if not </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00693">get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="32c0fe95e7d5748ac5c19ec82c10d14d"></a><!-- doxytag: member="libtime.c::client_set_autosync" ref="32c0fe95e7d5748ac5c19ec82c10d14d" args="(int enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_set_autosync           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>enable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'set_autosync' method call over D-Bus<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>enable</em>&nbsp;</td><td>&gt;0 if autosync is enabled, 0 if not</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if OK, 0 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l01302">time_set_autosync()</a>.</p>

</div>
</div><p>
<a class="anchor" name="870d4b19ed5833cbeba4f9927df059c8"></a><!-- doxytag: member="libtime.c::client_is_operator_time_accessible" ref="870d4b19ed5833cbeba4f9927df059c8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_is_operator_time_accessible           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute 'have_opertime' method call over D-Bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if network time service is available (in the hardware/configuration), 0 if not </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00693">get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="98f6dc99442e15f6e16530adab8765e3"></a><!-- doxytag: member="libtime.c::get_synced" ref="98f6dc99442e15f6e16530adab8765e3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int get_synced           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sync local (cached) data with clockd.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l00719">libtime_init()</a>, and <a class="el" href="libtime_8c-source.html#l00797">time_get_synced()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a30f448499c0b07fc38c5b8d01b26c3a"></a><!-- doxytag: member="libtime.c::libtime_init" ref="a30f448499c0b07fc38c5b8d01b26c3a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void libtime_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize libtime shlib:<br>
<ul>
<li>semaphore<br>
</li><li>cached data </li></ul>

</div>
</div><p>
<a class="anchor" name="9e5793082e85cf72400b52348241f288"></a><!-- doxytag: member="libtime.c::libtime_fini" ref="9e5793082e85cf72400b52348241f288" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void libtime_fini           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
De-nitialize libtime shlib:<br>
<ul>
<li>semaphore<br>
 </li></ul>

</div>
</div><p>
<a class="anchor" name="f8db26585c7e7e57b5bca1b950e7dba8"></a><!-- doxytag: member="libtime.c::time_get_synced" ref="f8db26585c7e7e57b5bca1b950e7dba8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_synced           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to call when "time changed" indication (see osso_time_set_notification_cb) has been received by the application.<br>
 If the application does not wish to link with libosso, then it can listen to the CLOCKD_TIME_CHANGED D-Bus signal, that clockd sends also.<p>
The time changed indication is broadcasted to all libtime users when:<ul>
<li>time is changed (time_set_time or by automatic network time change)</li><li>time zone is changed (time_set_timezone or by automatic network time change)</li><li>time formatter is changed (time_set_time_format)</li><li>automatic network time setting is changed (time_set_autosync)</li></ul>
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails </dd></dl>

</div>
</div><p>
<a class="anchor" name="0e44b0cb73ba32422c5586895b27edec"></a><!-- doxytag: member="libtime.c::time_get_time" ref="0e44b0cb73ba32422c5586895b27edec" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t time_get_time           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current time - see time() 
</div>
</div><p>
<a class="anchor" name="fdd711a8ac871a54f2c5d5867137df57"></a><!-- doxytag: member="libtime.c::time_set_time" ref="fdd711a8ac871a54f2c5d5867137df57" args="(time_t tick)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_set_time           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set current system and RTC time<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time since Epoch</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails </dd></dl>

</div>
</div><p>
<a class="anchor" name="89e293d7c574eb70e0e2b62844e91717"></a><!-- doxytag: member="libtime.c::time_activate_net_time" ref="89e293d7c574eb70e0e2b62844e91717" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_activate_net_time           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set current system and RTC time according to operator network time in case <a class="el" href="libtime_8c.html#e6c61efaeef52f459a95521749154550">time_is_net_time_changed()</a> indicates change<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails (for example if the network time has not changed) </dd></dl>

</div>
</div><p>
<a class="anchor" name="3f552afdecca5ec71d570823e52c1d54"></a><!-- doxytag: member="libtime.c::time_get_timezone" ref="3f552afdecca5ec71d570823e52c1d54" args="(char *buf, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_timezone           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current time zone. May return empty string if time zone has not been set.<br>
 Example output:<br>
 :US/Central <br>
 GMT+5:00GMT+4:00,0,365 <br>
 The latter format is returned when network has indicated time zone change (the actual location is not known)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store timezone </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of characters wrote to 's'. Does not write more than size bytes (including the trailing "\0"). If the output was truncated due to this limit then the return value is the number of characters (not including the trailing "\0") which would have been written to the final string if enough space had been available. Thus, a return value of size or more means that the output was truncated. If an output error is encountered, a negative value is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="bdc11987fc52c5d0359067026f4cedc8"></a><!-- doxytag: member="libtime.c::time_get_tzname" ref="bdc11987fc52c5d0359067026f4cedc8" args="(char *buf, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_tzname           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current time zone name (like "EET")<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store tzname </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of characters wrote to 's'. Does not write more than size bytes (including the trailing "\0"). If the output was truncated due to this limit then the return value is the number of characters (not including the trailing "\0") which would have been written to the final string if enough space had been available. Thus, a return value of size or more means that the output was truncated. If an output error is encountered, a negative value is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3b7ac22690790e84f32a0a3884e040e4"></a><!-- doxytag: member="libtime.c::time_set_timezone" ref="3b7ac22690790e84f32a0a3884e040e4" args="(const char *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_set_timezone           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set current time zone ("TZ")<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Time zone variable. All formats that glibc supports can be given.<br>
 See <a href="http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html">http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html</a><br>
 It is, however recommended to use /usr/share/zoneinfo -method, for example:<br>
 :Europe/Rome and not like this: EST+5EDT,M4.1.0/2,M10.5.0/2</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails </dd></dl>

</div>
</div><p>
<a class="anchor" name="dac10e54acc2ba4cb07588c84a1811a4"></a><!-- doxytag: member="libtime.c::time_get_utc" ref="dac10e54acc2ba4cb07588c84a1811a4" args="(struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_utc           </td>
          <td>(</td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current time in UTC. Inspired by time() and gmtime_r()<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Supplied buffer to store result</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="6978c98b45a7ba38918321bcf10cd302"></a><!-- doxytag: member="libtime.c::time_get_utc_ex" ref="6978c98b45a7ba38918321bcf10cd302" args="(time_t tick, struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_utc_ex           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get time in UTC.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Supplied buffer to store result</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="8f322ea4f1b395ce789bde87a1f82c16"></a><!-- doxytag: member="libtime.c::time_get_local" ref="8f322ea4f1b395ce789bde87a1f82c16" args="(struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_local           </td>
          <td>(</td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current local time. Inspired by time() and localtime_r().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Supplied buffer to store tm</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="0d8c8e5c5b07f8f86af2d532b63a99de"></a><!-- doxytag: member="libtime.c::time_get_local_ex" ref="0d8c8e5c5b07f8f86af2d532b63a99de" args="(time_t tick, struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_local_ex           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get local time.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Supplied buffer to store tm</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="09d62e58f222e51a867314408b10d7ec"></a><!-- doxytag: member="libtime.c::time_get_remote" ref="09d62e58f222e51a867314408b10d7ec" args="(time_t tick, const char *tz, struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_remote           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get local time in given zone. Inspired by setting TZ temporarily and localtime_r().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time since Epoch </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Time zone variable. All formats that glibc supports can be given.<br>
 See <a href="http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html">http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Supplied buffer to store tm</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="2c8d47b189bd59774826a2e90d428c31"></a><!-- doxytag: member="libtime.c::time_get_time_format" ref="2c8d47b189bd59774826a2e90d428c31" args="(char *buf, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_time_format           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get current time string formatter. Inspired by strftime().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store formatter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of characters wrote to 's'. Does not write more than size bytes (including the trailing "\0"). If the output was truncated due to this limit then the return value is the number of characters (not including the trailing "\0") which would have been written to the final string if enough space had been available. Thus, a return value of size or more means that the output was truncated. If an output error is encountered, a negative value is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b65f35e1dbbd0627393d8915dfb6c49b"></a><!-- doxytag: member="libtime.c::time_get_default_timezone" ref="b65f35e1dbbd0627393d8915dfb6c49b" args="(char *buf, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_default_timezone           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the default time zone. Empty string is returned if no default zone has been defined.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store the zone </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of characters wrote to 's'. Does not write more than size bytes (including the trailing "\0"). If the output was truncated due to this limit then the return value is the number of characters (not including the trailing "\0") which would have been written to the final string if enough space had been available. Thus, a return value of size or more means that the output was truncated. If an output error is encountered, a negative value is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="45229beef1f2d819fb5858dc762c8e5a"></a><!-- doxytag: member="libtime.c::time_set_time_format" ref="45229beef1f2d819fb5858dc762c8e5a" args="(const char *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_set_time_format           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set current time string formatter. Inspired by strftime().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Formatter string</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if fails </dd></dl>

</div>
</div><p>
<a class="anchor" name="3f8f2ba67056f927ea03bf806292fa71"></a><!-- doxytag: member="libtime.c::time_format_time" ref="3f8f2ba67056f927ea03bf806292fa71" args="(const struct tm *tm, const char *fmt, char *s, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_format_time           </td>
          <td>(</td>
          <td class="paramtype">const struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Format given time to string. Inspired by strftime() and localtime_r().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Formatter, see strftime and time_set_time_format and time_get_time_format, NULL if active formatter is used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store result </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>See strftime() </dd></dl>

</div>
</div><p>
<a class="anchor" name="c8c409cf5c596a5f237e5b8d4985341c"></a><!-- doxytag: member="libtime.c::time_get_utc_offset" ref="c8c409cf5c596a5f237e5b8d4985341c" args="(const char *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_utc_offset           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get utc offset (secs west of GMT) in the named TZ. The current daylight saving time offset is included.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Time zone, all formats that glibc supports can be given. NULL to use current tz.<br>
 See <a href="http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html">http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html</a></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Secs west of GMT. or -1 in case of error </dd></dl>

</div>
</div><p>
<a class="anchor" name="f5a65d5aab89e93aedd04dad66d6f27f"></a><!-- doxytag: member="libtime.c::time_get_dst_usage" ref="f5a65d5aab89e93aedd04dad66d6f27f" args="(time_t tick, const char *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_dst_usage           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return if daylight-saving-time is in use in given time.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time since Epoch </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Time zone, all formats that glibc supports can be given. NULL to use current tz.<br>
 See <a href="http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html">http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html</a></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Nonzero if daylight savings time is in effect, zero if not, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="a8f2dd9ba3f044b2111b040aa47ba048"></a><!-- doxytag: member="libtime.c::time_diff" ref="a8f2dd9ba3f044b2111b040aa47ba048" args="(time_t t1, time_t t2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double time_diff           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>t2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
See difftime() 
</div>
</div><p>
<a class="anchor" name="d9bb6969fcd9a4fb5a30d06a68f57006"></a><!-- doxytag: member="libtime.c::time_mktime" ref="d9bb6969fcd9a4fb5a30d06a68f57006" args="(struct tm *tm, const char *tz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t time_mktime           </td>
          <td>(</td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Make time_t from struct tm. Like mktime() but timezone can be given.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>See mktime </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz</em>&nbsp;</td><td>Time zone variable. All formats that glibc supports can be given. NULL if current zone is used.<br>
 See <a href="http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html">http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html</a></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Time since Epoch (0) if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="16d2037dfad8313c6dc221a9623fbd57"></a><!-- doxytag: member="libtime.c::time_get_net_time" ref="16d2037dfad8313c6dc221a9623fbd57" args="(time_t *tick, char *s, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_net_time           </td>
          <td>(</td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the network time (in case that autosync is not enabled and a network time change indication has received)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Supplied buffer to store network time (ticks since Epock) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Supplied buffer to store network timezone </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of 's', including terminating NUL</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Number of characters wrote to 's'. -1 if network time has not been changed. Does not write more than size bytes (including the trailing "\0"). If the output was truncated due to this limit then the return value is the number of characters (not including the trailing "\0") which would have been written to the final string if enough space had been available. Thus, a return value of size or more means that the output was truncated. </dd></dl>

<p>Referenced by <a class="el" href="libtime_8c-source.html#l01294">time_is_net_time_changed()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e6c61efaeef52f459a95521749154550"></a><!-- doxytag: member="libtime.c::time_is_net_time_changed" ref="e6c61efaeef52f459a95521749154550" args="(time_t *tick, char *s, size_t max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_is_net_time_changed           </td>
          <td>(</td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deprecated, see time_get_net_time 
</div>
</div><p>
<a class="anchor" name="4a68c690a500ce33c05a2751eb9cc0c5"></a><!-- doxytag: member="libtime.c::time_set_autosync" ref="4a68c690a500ce33c05a2751eb9cc0c5" args="(int enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_set_autosync           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>enable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enable or disable automatic time settings based on cellular network time.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>enable</em>&nbsp;</td><td>Nonzero to enable, zero to disable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if OK, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="39687b49dcb5972d44a8e11ca471b9c2"></a><!-- doxytag: member="libtime.c::time_get_autosync" ref="39687b49dcb5972d44a8e11ca471b9c2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_autosync           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the state of automatic time settings based on cellular network time.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Nonzero if enabled, zero if disabled, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="cf051c3a6b5a415aef3cee667a4ae018"></a><!-- doxytag: member="libtime.c::time_is_operator_time_accessible" ref="cf051c3a6b5a415aef3cee667a4ae018" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_is_operator_time_accessible           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get info if the device supports network time updates (i.e. has CellMo).<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Nonzero if accessible, 0 if not, -1 if error </dd></dl>

</div>
</div><p>
<a class="anchor" name="1651654092cddd772df20121398de3b8"></a><!-- doxytag: member="libtime.c::time_get_time_diff" ref="1651654092cddd772df20121398de3b8" args="(time_t tick, const char *tz1, const char *tz2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_get_time_diff           </td>
          <td>(</td>
          <td class="paramtype">time_t&nbsp;</td>
          <td class="paramname"> <em>tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tz2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get time difference between two timezones<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tick</em>&nbsp;</td><td>Time since Epoch </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz1</em>&nbsp;</td><td>Timezone 1 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tz2</em>&nbsp;</td><td>Timezone 2</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Local time in tz1 - local time in tz2 </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 21 15:45:53 2010 for libtime by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
