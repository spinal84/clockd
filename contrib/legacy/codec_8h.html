<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>clockd: codec.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>codec.h File Reference</h1>Time services - D-Bus encoding and decoding. <a href="#_details">More...</a>
<p>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;dbus/dbus.h&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="codec_8h.html#cc1a20c58c1de2451d91e5fbb65ae461">decode_int</a> (DBusMessageIter *iter, int *pval)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="codec_8h.html#5db3eb79b60d19aaa5fc51ac4483b391">decode_tm</a> (DBusMessageIter *iter, struct tm *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="codec_8h.html#eb203b8037a3e0f13bf6df226406c104">decode_ctm</a> (DBusMessageIter *iter, struct tm *tm)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Copyright (C) 2008 Nokia. All rights reserved.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Simo Piiroinen &lt;<a href="mailto:simo.piiroinen@nokia.com">simo.piiroinen@nokia.com</a>&gt; <p>
Raimo Vuonnala &lt;<a href="mailto:raimo.vuonnala@nokia.com">raimo.vuonnala@nokia.com</a>&gt; </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="cc1a20c58c1de2451d91e5fbb65ae461"></a><!-- doxytag: member="codec.h::decode_int" ref="cc1a20c58c1de2451d91e5fbb65ae461" args="(DBusMessageIter *iter, int *pval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decode_int           </td>
          <td>(</td>
          <td class="paramtype">DBusMessageIter *&nbsp;</td>
          <td class="paramname"> <em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Decode iteratively integer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iter</em>&nbsp;</td><td>DBusMessageIter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pval</em>&nbsp;</td><td>Pointer to int to store the decoded integer</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>-1 if error, 0 if success </dd></dl>

</div>
</div><p>
<a class="anchor" name="5db3eb79b60d19aaa5fc51ac4483b391"></a><!-- doxytag: member="codec.h::decode_tm" ref="5db3eb79b60d19aaa5fc51ac4483b391" args="(DBusMessageIter *iter, struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decode_tm           </td>
          <td>(</td>
          <td class="paramtype">DBusMessageIter *&nbsp;</td>
          <td class="paramname"> <em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Decode struct tm<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iter</em>&nbsp;</td><td>DBusMessageIter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Pointer to struct tm to store the decoded time</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>-1 if error, 0 if success </dd></dl>

</div>
</div><p>
<a class="anchor" name="eb203b8037a3e0f13bf6df226406c104"></a><!-- doxytag: member="codec.h::decode_ctm" ref="eb203b8037a3e0f13bf6df226406c104" args="(DBusMessageIter *iter, struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int decode_ctm           </td>
          <td>(</td>
          <td class="paramtype">DBusMessageIter *&nbsp;</td>
          <td class="paramname"> <em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Decode NET_TIME_IND to struct tm<p>
The information may include the current date (day-month-year) and time (hour-minute-second) in UTC (Coordinated Universal Time), which is in practice same as GMT (Greenwich Mean Time).<p>
Daylight Saving Time<p>
<ul>
<li>NET_DST_INFO_NOT_AVAIL 0x64</li><li>NET_DST_1_HOUR 0x01</li><li>NET_DST_2_HOURS 0x02</li><li>NET_DST_0_HOUR 0x00</li></ul>
<p>
Example 1: <br>
 if the time is 12:00:00 and time zone is GMT+2 hours and daylight saving time information is NET_DST_1_HOUR then the local time is 12:00:00 + 2 hours = 14:00:00. The Universal time is 12:00:00, the daylight saving is in use, so the normal time in that area would be 13:00:00.<p>
Example 2: <br>
 if universal time information is missing, but time zone information indicates GMT - 10 hours, then the local time is 02:00:00 when universal time is 12:00:00.<p>
Example 3: <br>
 if universal time information is missing and time zone information is missing, but daylight saving time information indicate NET_DST_1_HOUR then it can be known that daylight saving of 1 hour is used currently in the area and the current local time is +1 hours from the normal local time. However, if time zone is not known it is not possible to determine the local time. (The time zone might be known by some other means.)<p>
See:<ul>
<li><a href="http://www.timeanddate.com/worldclock/">http://www.timeanddate.com/worldclock/</a></li><li><a href="http://www.timeanddate.com/library/abbreviations/timezones/na/pst.html">http://www.timeanddate.com/library/abbreviations/timezones/na/pst.html</a></li><li><a href="http://www.timeanddate.com/library/abbreviations/timezones/eu/eet.html">http://www.timeanddate.com/library/abbreviations/timezones/eu/eet.html</a></li></ul>
<p>
<ul>
<li>UTC time is 22:00 1st May 2008</li><li>What is the YMDhms in Finland? 2. May 2008, 00:00:00</li></ul>
<p>
<ul>
<li>What is the value of Timezone in Finland? UTC+2 hours EET</li><li>What is the YMDhms in California? San Francisco (U.S.A. - California) 1. May 2008, 14:00:00</li></ul>
<p>
<ul>
<li>What is the value of Timezone in California ? UTC-8 hours PST <br>
</li></ul>
<p>
See spec: <a href="https://svni1.isource-nokia.nokia.com/isource/svnroot/ngsp-swd/ngsp-alpha/trunk/casw/telephony-adaptation/libcsnet/net_dbus_interface.txt">https://svni1.isource-nokia.nokia.com/isource/svnroot/ngsp-swd/ngsp-alpha/trunk/casw/telephony-adaptation/libcsnet/net_dbus_interface.txt</a><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iter</em>&nbsp;</td><td>DBusMessageIter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>Pointer to struct tm to store the decoded time. tm-&gt;tm_yday is the UTC offset in secs.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>-1 if error, 0 if success </dd></dl>

<p>Referenced by <a class="el" href="server_8c-source.html#l00552">handle_csd_net_time_change()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 21 15:45:53 2010 for clockd by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
